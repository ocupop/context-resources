---
import { footer } from "../../../data/navigation.json";
import OcupopLogo from "../logos/OcupopLogo";
const linkHoverColor = footer.hover_text_color;

// Handle logo config - support both new config object and legacy image path
const logoConfig = footer.logo;
const useComponent = logoConfig && typeof logoConfig === 'object' && 'layout' in logoConfig;
---

<footer
  style={`background-color: ${footer.background_color}; color: ${footer.text_color};`}>
  <div class="px-8">
    <div
      class="footer grid grid-cols-1 sm:grid-cols-2 justify-between items-center gap-8 py-[48px]">
      <a
        class="flex justify-center sm:justify-start items-center"
        href={footer.logo_url}>
        {useComponent ? (
          <OcupopLogo
            client:load
            layout={(logoConfig.layout as "default" | "wordmark" | "logo") || "default"}
            fill={logoConfig.fill || "#ffffff"}
            width={logoConfig.width || 200}
            className="footer__logo-image"
            {...({ "aria-label": footer.logo_alt_text } as any)}
          />
        ) : (
          <img
            class="footer__logo-image"
            src={typeof footer.logo === 'string' ? footer.logo : '/images/logos/ocupop-wordmark.svg'}
            alt={footer.logo_alt_text}
          />
        )}
      </a>

      <ul class="footer-links flex flex-col text-center sm:text-end gap-4">
        {
          footer.links.map((link) => {
            return (
              <li>
                <a href={link.link}>{link.text}</a>
              </li>
            );
          })
        }
      </ul>
    </div>
  </div>
</footer>

<style define:vars={{ linkHoverColor }}>
  .footer {
    max-width: var(--pageContainer);
    margin: 0 auto;
    padding: 2rem;
  }
  .footer__logo-image {
    display: block;
    max-width: min(200px, 80%);
  }
  .footer-links li:hover {
    color: var(--linkHoverColor);
  }
</style>
